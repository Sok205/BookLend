<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Procedure Simulation (procedures are not native to sqlite) - Display Text</title>
</head>
<body>
    <h1>Simulated Stored Procedure: display_text</h1>
    <p>This simulates a stored procedure that displays a short text passed as a parameter value.</p>
    <p><em>Uses parameterized SQL query (works with SQLite and MySQL)</em></p>

    <form method="post">
        {% csrf_token %}
        <label for="text_param">Enter text to display:</label><br>
        <input type="text" id="text_param" name="text_param" value="{{ text_param|default:'' }}" size="50" required>
        <button type="submit">Execute Query</button>
    </form>

    {% if error %}
        <div style="color: red; margin-top: 20px; padding: 10px; border: 1px solid red;">
            <strong>Error:</strong> {{ error }}
        </div>
    {% endif %}

    {% if result %}
        <div style="margin-top: 20px; padding: 10px; border: 1px solid green; background-color: #e8f5e9;">
            <h2>Query Result:</h2>
            <p><strong>Displayed Text:</strong> {{ result.0 }}</p>
        </div>
    {% endif %}

    <h3 style="margin-top: 30px;">How it works:</h3>
    <p>This simulates stored procedure behavior by:</p>
    <ol>
        <li>Accepting a parameter from user input</li>
        <li>Building a parameterized SQL query: <code>SELECT ? AS displayed_text</code></li>
        <li>Executing the query with the parameter</li>
        <li>Returning the result</li>
    </ol>
    <p><strong>Example:</strong> Try entering your first name to demonstrate it works correctly.</p>

    <p style="margin-top: 30px;"><a href="{% url 'catalog:index' %}">Back to menu</a></p>
</body>
</html>
